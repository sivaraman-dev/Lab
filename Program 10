Employee.aspx

<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Employee.aspx.cs" Inherits="Employee" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div style="width:500px; padding:10px; border:1px solid #ccc;">

            <h3>Employee Database Operations</h3>

            <asp:Label ID="lblMessage" runat="server" ForeColor="Green"></asp:Label><br /><br />

            <b>Emp_ID (For Update/Delete):</b><br />
            <asp:TextBox ID="txtEmp_ID" runat="server" Width="200px"></asp:TextBox><br /><br />

            <b>Emp_Name:</b><br />
            <asp:TextBox ID="txtEmp_Name" runat="server" Width="200px"></asp:TextBox><br /><br />

            <b>Designation:</b><br />
            <asp:TextBox ID="txtDesignation" runat="server" Width="200px"></asp:TextBox><br /><br />

            <b>Salary:</b><br />
            <asp:TextBox ID="txtSalary" runat="server" Width="200px"></asp:TextBox><br /><br />

            <b>City:</b><br />
            <asp:TextBox ID="txtCity" runat="server" Width="200px"></asp:TextBox><br /><br />

            <asp:Button ID="btnInsert" runat="server" Text="Insert" OnClick="btnInsert_Click" />
            <asp:Button ID="btnUpdate" runat="server" Text="Update" OnClick="btnUpdate_Click" />
            <asp:Button ID="btnDelete" runat="server" Text="Delete" OnClick="btnDelete_Click" /><br /><br />


            <hr />
            <h4>Employees&nbsp; List:</h4>
            <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="true" BorderColor="#ccc" BorderStyle="Solid"
                BorderWidth="1px" CellPadding="5" GridLines="Both">
            </asp:GridView>

        </div>
    </form>
</body>
</html>




Employee.aspx.cs

using System;
using System.Data;
using System.Data.SqlClient;

public partial class Employee : System.Web.UI.Page
{
    SqlConnection con = new SqlConnection("Data Source=localhost\\sqlexpress;Initial Catalog=My_GK01;Integrated Security=True");

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            LoadEmployee();  // Load table on initial page load
        }
    }

    protected void btnInsert_Click(object sender, EventArgs e)
    {
        con.Open();
        SqlCommand cmd = new SqlCommand("INSERT INTO Emp (Emp_ID, Emp_Name, Designation, Salary, City) VALUES (@Emp_ID, @Emp_Name, @Designation, @Salary, @City)", con);
        cmd.Parameters.AddWithValue("@Emp_ID", txtEmp_ID.Text.Trim());
        cmd.Parameters.AddWithValue("@Emp_Name", txtEmp_Name.Text.Trim());
        cmd.Parameters.AddWithValue("@Designation", txtDesignation.Text.Trim());
        cmd.Parameters.AddWithValue("@Salary", txtSalary.Text.Trim());
        cmd.Parameters.AddWithValue("@City", txtCity.Text.Trim());
        cmd.ExecuteNonQuery();
        con.Close();

        lblMessage.Text = "Inserted Successfully";
        ClearFields();
        LoadEmployee();  // Reload table
    }

    protected void btnUpdate_Click(object sender, EventArgs e)
    {
        con.Open();
        SqlCommand cmd = new SqlCommand("UPDATE Emp SET Emp_Name=@Emp_Name, Designation=@Designation, Salary=@Salary, City=@City  WHERE Emp_ID=@Emp_ID", con);
        cmd.Parameters.AddWithValue("@Emp_ID", txtEmp_ID.Text.Trim());
        cmd.Parameters.AddWithValue("@Emp_Name", txtEmp_Name.Text.Trim());
        cmd.Parameters.AddWithValue("@Designation", txtDesignation.Text.Trim());
        cmd.Parameters.AddWithValue("@Salary", txtSalary.Text.Trim());
        cmd.Parameters.AddWithValue("@City", txtCity.Text.Trim());
        int rows = cmd.ExecuteNonQuery();
        con.Close();

        if (rows > 0)
            lblMessage.Text = "Updated Successfully";
        else
            lblMessage.Text = "Update Failed or ID not found";

        ClearFields();
        LoadEmployee();  // Reload table
    }

    protected void btnDelete_Click(object sender, EventArgs e)
    {
        con.Open();
        SqlCommand cmd = new SqlCommand("DELETE FROM Emp WHERE Emp_ID=@Emp_ID", con);
        cmd.Parameters.AddWithValue("@Emp_ID", txtEmp_ID.Text.Trim());
        int rows = cmd.ExecuteNonQuery();
        con.Close();

        if (rows > 0)
            lblMessage.Text = "Deleted Successfully";
        else
            lblMessage.Text = "Delete Failed or ID not found";

        ClearFields();
        LoadEmployee();  // Reload table
    }

    private void LoadEmployee()
    {
        con.Open();
        SqlCommand cmd = new SqlCommand("SELECT Emp_ID, Emp_Name, Designation, Salary, City FROM Emp", con);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        da.Fill(dt);
        con.Close();

        GridView1.DataSource = dt;
        GridView1.DataBind();
    }

    private void ClearFields()
    {
        txtEmp_ID.Text = "";
        txtEmp_Name.Text = "";
        txtDesignation.Text = "";
        txtSalary.Text = "";
        txtCity.Text = "";

    }
}
